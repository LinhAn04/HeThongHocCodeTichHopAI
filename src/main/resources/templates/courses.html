<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Courses - Codemy</title>
    <link rel="stylesheet" th:href="@{/css/courses.css}">
</head>

<body>
<header th:replace="fragments/header :: header(loggedIn=${loggedIn}, user=${user})"></header>

<div class="page-container">
    <!-- Banner course -->
    <section class="banner">
        <div class="banner-slider"
             th:each="c, idx : ${bannerCourses}"
             th:classappend="${idx.index == 0} ? 'active' : ''">

            <img th:src="${c.anhBiaKhoaHoc}" class="banner-bg">

            <div class="banner-content">
                <h1 th:text="${c.tenKhoaHoc}"></h1>
                <p th:text="${c.moTaKhoaHoc}"></p>

                <div class="banner-actions">

                    <!-- Chưa login -->
                    <a th:if="${!loggedIn}"
                       class="btn-primary"
                       th:href="@{'/course/' + ${c.idKhoaHoc}}">Try this out
                    </a>

                    <!-- Đã login + đang học course này -->
                    <a th:if="${loggedIn and courseStatusMap[c.idKhoaHoc]?.name() == 'DANGHOC'}"
                       class="btn-primary"
                       th:href="@{'/course/' + ${c.idKhoaHoc}}">Continue your journey
                    </a>

                    <!-- Đã login + chưa đăng ký -->
                    <a th:if="${loggedIn and courseStatusMap[c.idKhoaHoc] == null}"
                       class="btn-primary"
                       th:href="@{'/course/' + ${c.idKhoaHoc}}">Start this course
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- only if u logged in & has recently access courses -->
    <section th:if="${loggedIn and not #lists.isEmpty(recentCourses)}">
        <h2>Recently</h2>

        <div class="course-grid">
            <a class="course-card"
               th:each="c : ${recentCourses}"
               th:href="@{'/course/' + ${c.idKhoaHoc}}">

                <img th:src="${c.anhBiaKhoaHoc}" class="course-thumb">
                <div class="course-name" th:text="${c.tenKhoaHoc}"></div>
                <div class="course-author">Codemy team</div>
            </a>
        </div>
    </section>

    <!-- Courses list -->
    <section>
        <h2>Courses</h2>

        <div class="course-grid">
            <a class="course-card"
               th:each="c : ${courses}"
               th:href="@{'/course/' + ${c.idKhoaHoc}}">

                <img th:src="${c.anhBiaKhoaHoc}" class="course-thumb">
                <div class="course-name" th:text="${c.tenKhoaHoc}"></div>
                <div class="course-author">Codemy team</div>
            </a>
        </div>
    </section>

</div>

<script th:src="@{/js/header.js}"></script>
<script th:src="@{/js/courses.js}"></script>

</body>
</html>
