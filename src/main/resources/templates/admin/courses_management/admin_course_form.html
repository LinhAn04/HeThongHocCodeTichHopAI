<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin – Course</title>

    <link rel="stylesheet" th:href="@{/css/student/fragments/header.css}">
    <link rel="stylesheet" th:href="@{/css/admin/fragments/sidebar.css}">
    <link rel="stylesheet"
          th:href="@{/css/admin/courses_management/admin_course_form.css}">
</head>

<body>

<header th:replace="~{admin/fragments/admin_header :: adminHeader(${user})}"></header>
<aside th:replace="~{admin/fragments/admin_sidebar :: adminSidebar}"></aside>

<div class="form-card">

    <form th:action="@{/admin/courses/save}" method="post" th:object="${course}">
        <input type="hidden" th:field="*{idKhoaHoc}"/>

        <div class="cover-section">
            <div class="cover-wrapper" id="coverClickArea">
                <img id="coverPreview"
                     th:src="${#strings.isEmpty(course.anhBiaKhoaHoc)
                    ? '/images/cover_placeholder.png'
                    : course.anhBiaKhoaHoc}"
                                 th:classappend="${#strings.isEmpty(course.anhBiaKhoaHoc)
                    ? ' cover-default' : ''}">
                <div class="cover-overlay">Click to upload cover image</div>
            </div>

            <input type="file"
                   id="coverInput"
                   name="file"
                   accept="image/*"
                   hidden>

            <input type="hidden" th:field="*{anhBiaKhoaHoc}" id="coverPath">
        </div>

        <label>Course name</label>
        <input type="text" th:field="*{tenKhoaHoc}" required>

        <label>Description</label>
        <textarea th:field="*{moTaKhoaHoc}" required></textarea>

        <label>Price (VNĐ)</label>
        <input type="text"
               id="priceInput"
               th:value="${course.giaBan != null ? #numbers.formatInteger(course.giaBan, 3, 'COMMA') : ''}"
               inputmode="numeric"
               required>
        <input type="hidden"
               th:field="*{giaBan}"
               id="priceValue">

        <div class="form-actions">
            <button class="btn-save">Save</button>
            <a th:href="@{/admin/courses}" class="btn-cancel">Cancel</a>
        </div>
    </form>
</div>

<script th:src="@{/js/admin_course_form.js}"></script>
</body>
</html>
