<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Account Settings - Codemy</title>
    <link rel="stylesheet" th:href="@{/css/student/fragments/header.css}">
    <link rel="stylesheet" th:href="@{/css/student/fragments/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/student/account_setting/customer_account_setting.css}">
</head>

<body>

<header th:replace="~{fragments/header :: header(loggedIn=${loggedIn}, user=${user})}"></header>
<aside th:replace="fragments/sidebar :: sidebar"></aside>

<div class="main-content-padding">
    <div class="settings-card">

        <div id="toast" class="toast"></div>
        <div class="toast-blur"></div>

        <div class="avatar-section">
            <div class="avatar-wrapper" id="avatarClickArea"
                 th:with="avatarUrl = ${user.avatar != null} ? ${user.avatar} : '/images/avatar_user_default.png'">

                <img id="avatarImg"
                     th:src="@{${avatarUrl}(v=${#dates.createNow().getTime()})}"
                     alt="Avatar">
            </div>

            <input type="file" id="avatarInput" accept="image/*" hidden>
            <small class="change-avatar-text">Click to change avatar</small>
        </div>

        <form id="accountForm" class="settings-form" autocomplete="off">
            <div class="form-row">
                <div class="form-group">
                    <label for="fullName">Full Name <span class="required">*</span></label>
                    <input type="text" id="fullName" name="hoTen" th:value="${user.hoTen}" placeholder="Full Name">
                </div>
                <div class="form-group">
                    <label for="birthday">Date of birth</label>
                    <input type="date" id="birthday" name="ngaySinh"
                           th:value="${user.ngaySinh != null} ? ${#temporals.format(user.ngaySinh, 'yyyy-MM-dd')}">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="email">Email Address <span class="required">*</span></label>
                    <input type="email" id="email" th:value="${user.email}" disabled>
                </div>
                <div class="form-group">
                    <label for="phone">Phone number</label>
                    <input type="text" id="phone" name="soDienThoai" th:value="${user.soDienThoai}" placeholder="Enter phone number">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="role">Role</label>
                    <input type="text" id="role" th:value="${user.loaiDoiTuongSuDung.name() == 'STUDENT' ? 'Student' : 'Admin'}" disabled>
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gioiTinh">
                        <option value="NAM" th:selected="${user.gioiTinh?.name() == 'NAM'}">Male</option>
                        <option value="NU" th:selected="${user.gioiTinh?.name() == 'NU'}">Female</option>
                        <option value="KHAC" th:selected="${user.gioiTinh?.name() == 'KHAC'}">Other</option>
                    </select>
                </div>
            </div>

            <div class="form-group full-width">
                <label for="address">Address</label>
                <input type="text" id="address" name="diaChi" th:value="${user.diaChi}" placeholder="Enter your address">
            </div>

            <div class="save-row">
                <button type="submit" id="saveBtn" class="save-btn" disabled>Save</button>
            </div>
        </form>
    </div>
</div>

<script th:src="@{/js/sidebar.js}"></script>
<script th:src="@{/js/header.js}"></script>
<script th:src="@{/js/customer_account_setting.js}"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-whatever"
        crossorigin="anonymous"></script>

</body>
</html>